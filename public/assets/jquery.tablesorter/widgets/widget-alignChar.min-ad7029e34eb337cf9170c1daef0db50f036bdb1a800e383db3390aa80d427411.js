/*! Widget: alignChar - updated 2/7/2015 (v2.19.0) */
!function(n){"use strict";var a=n.tablesorter;a.alignChar={init:function(i,t,e){t.$headers.filter("["+e.alignChar_charAttrib+"]").each(function(){var r=n(this),l={column:this.column,align:r.attr(e.alignChar_charAttrib),alignIndex:parseInt(r.attr(e.alignChar_indexAttrib)||0,10),adjust:parseFloat(r.attr(e.alignChar_adjustAttrib))||0};l.regex=new RegExp("\\"+l.align,"g"),"undefined"!=typeof l.align&&(e.alignChar_savedVars[this.column]=l,a.alignChar.setup(i,t,e,l))})},setup:function(a,i,t,e){if(!n.isEmptyObject(i.cache)){var r,l,h,g,o,s,d,c,u,f,m,p,C,w,b=[],_=[];for(r=0;r<i.$tbodies.length;r++)for(d=i.cache[r],f=d.normalized.length,l=0;f>l;l++){if(w=d.row?d.row[l]:d.normalized[l][i.columns].$row,c=w.find("td").eq(e.column).text().replace(/[ ]/g,"\xa0"),u=(c.match(e.regex)||[]).length,u>0&&e.alignIndex>0)for(g=Math.min(e.alignIndex,u),h=0,s=0,o=0;h++<g;)o=c.indexOf(e.align,o+1),s=0>o?s:o;else s=c.indexOf(e.align);s>=0?(b.push(c.substring(0,s)||""),_.push(c.substring(s,c.length)||"")):(b.push(u>=1&&e.alignIndex>=u?"":c||""),_.push(u>=1&&e.alignIndex>=u?c||"":""))}for(m=n.extend([],b).sort(function(n,a){return a.length-n.length})[0],p=n.extend([],_).sort(function(n,a){return a.length-n.length})[0],e.width=e.width||Math.floor(m.length/(m.length+p.length)*100)+e.adjust,m="min-width:"+e.width+"%",p="min-width:"+(100-e.width)+"%",r=0;r<i.$tbodies.length;r++)for(d=i.cache[r],f=d.normalized.length,l=0;f>l;l++)C=n(t.alignChar_wrap).length?n(t.alignChar_wrap).html(e.align)[0].outerHTML:e.align,w=d.row?d.row[l]:d.normalized[l][i.columns].$row,o=_[l].slice(e.align.length),w.find("td").eq(e.column).html('<span class="ts-align-wrap"><span class="ts-align-left" style="'+m+'">'+b[l]+'</span><span class="ts-align-right" style="'+p+'">'+(o.length?C+o:"")+"</span></span>");t.alignChar_initialized=!0}},remove:function(a,i,t){if(!n.isEmptyObject(i.cache)){var e,r,l,h,g,o;for(e=0;e<i.$tbodies.length;e++)for(h=i.cache[e],l=h.normalized.length,r=0;l>r;r++)g=h.row?h.row[r]:h.normalized[r][i.columns].$row,o=g.find("td").eq(t),o.html(o.text().replace(/\s/g," "))}}},a.addWidget({id:"alignChar",priority:100,options:{alignChar_wrap:"",alignChar_charAttrib:"data-align-char",alignChar_indexAttrib:"data-align-index",alignChar_adjustAttrib:"data-align-adjust"},init:function(n,i,t,e){e.alignChar_initialized=!1,e.alignChar_savedVars=[],a.alignChar.init(n,t,e),t.$table.on("pagerEnd refreshAlign",function(){t.$headers.filter("["+e.alignChar_charAttrib+"]").each(function(){a.alignChar.remove(n,t,this.column)}),a.alignChar.init(n,t,e)})},format:function(n,a,i){i.alignChar_initialized||a.$table.trigger("refreshAlign")},remove:function(n,i,t,e){e||(i.$headers.filter("["+t.alignChar_charAttrib+"]").each(function(){a.alignChar.remove(n,i,this.column)}),t.alignChar_initialized=!1)}})}(jQuery);