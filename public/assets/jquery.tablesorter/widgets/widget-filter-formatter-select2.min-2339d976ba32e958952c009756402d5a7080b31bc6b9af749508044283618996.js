/*! Widget: filter, select2 formatter function - updated 3/26/2015 (v2.21.3) */
!function(e){"use strict";var t=e.tablesorter||{};t.filterFormatter=t.filterFormatter||{},t.filterFormatter.select2=function(l,a,i){var n,c,s=e.extend({cellText:"",match:!0,value:"",multiple:!0,width:"100%"},i),r=l.closest("table")[0].config,d=r.widgetOptions,f=e('<input class="filter" type="hidden">').appendTo(l).bind("change"+r.namespace+"filter",function(){var e=this.value;e=e.replace(/[/()$^]/g,"").split("|"),l.find(".select2").select2("val",e),b()}),o=r.$headerIndexed[a],p=o.hasClass(d.filter_onlyAvail),u=[],v=s.match?"":"^",h=s.match?"":"$",b=function(){var t=!1,a=l.find(".select2").select2("val")||s.value||"";e.isArray(a)&&(t=!0,a=a.join("\x00")),a=a.replace(/[-[\]{}()*+?.,/\\^$|#\s]/g,"\\$&"),t&&(a=a.split("\x00")),f.val(e.isArray(a)&&a.length&&""!==a.join("")?"/("+v+(a||[]).join(h+"|"+v)+h+")/":"").trigger("search").end().find(".select2").select2("val",a),u.length&&u.find(".select2").select2("val",a)},g=function(){c=[],n=t.filter.getOptionSource(r.$table[0],a,p)||[],e.each(n,function(e,t){c.push({id:t,text:t})}),s.data=c};return o.toggleClass("filter-match",s.match),s.cellText&&l.prepend("<label>"+s.cellText+"</label>"),s.ajax&&!e.isEmptyObject(s.ajax)||s.data||(g(),p&&r.$table.bind("filterEnd",function(){g(),l.add(u).find(".select2").select2(s)})),e('<input class="select2 select2-'+a+'" type="hidden" />').val(s.value).appendTo(l).select2(s).bind("change",function(){b()}),r.$table.bind("filterFomatterUpdate",function(){var e=r.$table.data("lastSearch")[a]||"";e=e.replace(/^\/\(\^?/,"").replace(/\$\|\^/g,"|").replace(/\$?\)\/$/g,"").split("|"),l.find(".select2").select2("val",e),b(),t.filter.formatterUpdated(l,a)}),r.$table.bind("stickyHeadersInit",function(){u=r.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(a).empty(),e('<input class="select2 select2-'+a+'" type="hidden">').val(s.value).appendTo(u).select2(s).bind("change",function(){l.find(".select2").select2("val",u.find(".select2").select2("val")),b()}),s.cellText&&u.prepend("<label>"+s.cellText+"</label>")}),r.$table.bind("filterReset",function(){l.find(".select2").select2("val",s.value||""),setTimeout(function(){b()},0)}),b(),f}}(jQuery);